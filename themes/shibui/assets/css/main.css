:root {
  /* Typography */
  --spacing-base: 1.5em;
  --font-family-mono: monospace;
  --font-size-base: 1em;
  --font-size-small: 0.9em;
  --font-size-code: 0.95em;

  /* Spacing */
  --spacing-xs: calc(var(--spacing-base) * 0.25);
  --spacing-sm: calc(var(--spacing-base) * 0.5);
  --spacing-md: var(--spacing-base);
  --spacing-lg: calc(var(--spacing-base) * 2);

  /* Base theme knobs */
  --bg-h: 0;
  --bg-s: 0%;
  --bg-l: 99%;

  /* Background colors */
  --color-bg-primary: #E9E5E2;
  --color-bg-secondary: #DED7CD;
  --color-border: #C9C1B5;
  --color-selection-bg: #BDB4A6;

  /* Text colors with WCAG-friendly contrast */
  /* 文字 */
  --color-text-primary: #5A4E49;
  --color-text-muted: #82756F;
  --color-text-code: #5A4E49;

  /* Layout */
  --container-width: 64ch;
  --pre-border-radius: 0.75rem;
  --inline-border-radius: 0.375rem;
  --gap-base: 1em;
  --gap-small: 0.5em;

  /* Breakpoints */
  --breakpoint-mobile: 600px;
}

/* Common component styles */
.no-scrollbar {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE and Edge */
}

.no-scrollbar::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

.list-unstyled {
  list-style: none;
  margin-left: 0;
}

.text-muted {
  color: var(--color-text-muted);
}

.no-underline {
  text-decoration: none;
  border-bottom: none;
}

::selection {
  background: var(--color-selection-bg);
  color: var(--color-text-primary);
}

/* Skip link for accessibility */
.skip-link {
  position: absolute;
  top: -100%;
  left: 0;
  padding: var(--spacing-sm) var(--spacing-md);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  z-index: 1000;
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
}

.skip-link:focus {
  position: fixed;
  top: var(--spacing-sm);
  left: var(--spacing-sm);
  opacity: 1;
}

/* Focus styles for accessibility */
a:focus-visible,
button:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: 2px solid var(--color-text-primary);
  outline-offset: 2px;
}

* {
  margin: 0;
  padding: 0;
  font: inherit;
  color: var(--color-text-primary);
  box-sizing: border-box;
}

ul {
  list-style-type: disc;
  margin-left: 1.5rem;
}

ol {
  list-style-type: decimal;
  margin-left: 1.5rem;
}

html {
  margin: 0 0 0 calc(100vw - 100%);
  -webkit-text-size-adjust: 100%;
  height: 100%;
}

body {
  transition: opacity 0.3s ease-in;
  font: var(--font-size-base) / var(--spacing-base) var(--font-family-mono);
  background: var(--color-bg-primary);
  min-height: 100%;
  display: grid;
  grid-template-rows: auto 1fr auto;
  grid-template-columns: minmax(auto, var(--container-width));
  justify-content: center;
  padding: var(--spacing-lg);
  gap: var(--spacing-lg);
    /* 1. 稍微调大字号，让阅读更轻松 */
  font-size: 12px; 
  line-height: 2.0; 
  letter-spacing: 0.05em;
  -webkit-font-smoothing: antialiased;
}

a {
  display: inline-block;
  margin-left: -0.16666em;
  text-decoration: none;
  color: inherit; 
  
  /* --- 调整核心开始 --- */
  border-bottom: 1px dotted rgba(140, 67, 50, 0.8); 
  padding-bottom: 3px;  /* 这里的数值越小，线离文字越近。可以尝试 -1px 或 -2px */
  line-height: 0.9;     /* 稍微压缩行高，也能让线贴得更近 */
  text-underline-offset: 2px; /* 专门微调原生下划线位置 */
  text-decoration-skip-ink: auto; /* 这种效果在现代浏览器里非常优雅 */
  transition: all 0.3s ease-in-out; /* 让所有改变都变丝滑 */
}

a:hover {
  color: #8C4332; 
  /* 悬停时下划线可以变得更深（0.8 透明度），增加点击欲望 */
  border-bottom: 1px solid rgba(140, 67, 50);
}

p,
pre {
  margin: var(--spacing-base) 0;
}

h1,
h2,
h3,
h4,
h5 {
  margin: var(--spacing-base) 0;
  font-weight: bold;
}

h2 {
  counter-increment: h2;
  counter-reset: h3;
}

h3 {
  counter-increment: h3;
  counter-reset: h4;
}

h4 {
  counter-increment: h4;
  counter-reset: h5;
}

h5 {
  counter-increment: h5;
}

/* nested counters */
h2::before {
  content: counter(h2) ". ";
}

h3::before {
  content: counter(h2) "." counter(h3) ". ";
}

h4::before {
  content: counter(h2) "." counter(h3) "." counter(h4) ". ";
}

h5::before {
  content: counter(h2) "." counter(h3) "." counter(h4) "." counter(h5) ". ";
}

hr {
    border: none;
    border-top: 1px dashed rgba(140, 67, 50, 0.5); /* 配合你的砖红色 */
    height: 0;
    margin: 2em auto;
    width: 60%; /* 让线只占一半宽度，更有文学留白感 */
}

time {
  color: var(--color-text-muted);
}

footer {
  padding: calc(var(--spacing-base) * 2) 0;
  text-align: center;
}
footer p {
  margin-bottom: 0;
}

pre {
  border: 1px solid var(--color-border);
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--pre-border-radius);
  white-space: pre-wrap;
  word-wrap: break-word;
  font-family: var(--font-family-mono);
  font-size: var(--font-size-code);
  line-height: 1.6;
  color: var(--color-text-code);
  overflow-x: auto;
  box-shadow: 0 1px 2px 0 var(--color-border);
}

pre code {
  background: none;
  border: none;
  padding: 0;
  font-size: inherit;
  color: inherit;
}

p > code,
li > code,
h1 > code,
h2 > code,
h3 > code,
h4 > code,
h5 > code {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--inline-border-radius);
  padding: 0.2em 0.4em;
  font-family: var(--font-family-mono);
  font-size: var(--font-size-code);
  color: var(--color-text-code);
  white-space: pre-wrap;
  word-wrap: break-word;
}

.terms-list {
  padding-bottom: var(--spacing-base);
}

.terms-list ul {
  list-style-type: none;
  margin-left: 0;
}

.terms-list ul li {
  display: inline-block;
  font-style: italic;
  font-size: var(--font-size-small);
  color: var(--color-text-muted);
  padding: 0 3px;
}

/* Path navigation styles */
.path-nav {
  font-family: var(--font-family-mono);
  padding: var(--spacing-base) 0;
  white-space: nowrap;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE and Edge */
  width: 100%;
}

.path-nav::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

.path-nav ol {
  display: flex;
  flex-wrap: nowrap;
  list-style: none;
  margin: 0;
  padding: 0;
}

.path-nav li {
  display: flex;
  align-items: center;
  color: var(--color-text-muted);
  flex-shrink: 0;
  max-width: 200px; /* Limit maximum width on small screens */
}

.path-nav li.current {
  max-width: none; /* Allow full width for current page */
}

/* 优化后的路径导航文字样式 */
.path-nav li a {
  text-decoration: none;
  border-bottom: none;
  padding: 0.2em 0.25em; /* 关键：增加了 0.2em 的上下内边距，给汉字留出呼吸空间 */
  color: var(--color-text-muted);
  overflow: visible;      /* 允许汉字笔画稍微溢出边界 */
  display: inline-block;  /* 让 padding 生效 */
  line-height: 1.4;       /* 稍微撑开行高 */
}

.path-nav li.current a {
  color: var(--color-text-primary);
  font-weight: bold;
}

.path-nav a:hover {
  text-decoration: underline;
}

.back-nav {
  margin-bottom: var(--spacing-base);
}

.back-link {
  color: var(--color-text-muted);
  border-bottom: none;
}

.back-link:hover {
  color: var(--color-text-primary);
  text-decoration: none;
}

/* Time list */
.time-list ul {
  list-style: none;
  margin-left: 0;
}

.time-list li {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: var(--gap-base);
  align-items: start;
  padding: var(--spacing-sm) 0;
}

@media (max-width: 600px) {
  .time-list li {
    grid-template-columns: 1fr;
    gap: var(--gap-small);
  }

  .time-list time {
    font-size: var(--font-size-small);
  }
}

/* Main menu navigation styles */
.terminal-nav {
  font-family: var(--font-family-mono);
  border-top: 1px solid var(--color-border);
  margin-top: calc(var(--spacing-base) * 2);
  padding-top: var(--spacing-base);
}

.terminal-nav nav ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  gap: 1em;
}

.terminal-nav nav ul li {
  display: inline-block;
}

.terminal-nav nav ul li a,
.terminal-nav .back-link {
  color: var(--color-text-muted);
  border-bottom: none;
  text-decoration: none;
}

.terminal-nav nav ul li a:hover,
.terminal-nav .back-link:hover {
  color: var(--color-text-primary);
}

.terminal-nav nav ul li a.active {
  color: var(--color-text-primary);
  font-weight: bold;
}

.terminal-nav .back-nav {
  margin: calc(var(--spacing-base) * 0.5) 0;
}

/* Image styles */
img {
  display: block;
  max-width: 100%;
  height: auto;
  margin: var(--spacing-base) auto;
  border: 1px solid var(--color-border);
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--pre-border-radius);
}

figure {
  margin: var(--spacing-base) 0;
  text-align: center;
}

figure img {
  margin: 0 auto;
}

figcaption {
  color: var(--color-text-muted);
  font-size: var(--font-size-small);
  margin-top: calc(var(--spacing-base) / 2);
}

/* Table styles */
table {
  width: 100%;
  margin: var(--spacing-base) 0;
  border-collapse: collapse;
}

thead th,
th {
  font-weight: bold;
  text-align: center;
  border-bottom: 2px solid var(--color-border);
  padding: var(--spacing-sm);
}

td {
  padding: var(--spacing-sm);
  border-bottom: 1px solid var(--color-border);
}

/* Typography emphasis */
strong {
  font-weight: bold;
}

em {
  font-style: italic;
}

blockquote {
  background: rgba(255, 255, 255, 0.2); /* 半透明的白色，在米色背景上很干净 */
  border-left: none;
  border-radius: 8px;
  margin: 1.5em 0;
  padding: 1.5em;
  box-shadow: 2px 2px 5px rgba(0,0,0,0.02);
}

blockquote > :first-child {
  margin-top: 0;
}

blockquote > :last-child {
  margin-bottom: 0;
}

/* Table of Contents */
.toc {
  margin: var(--spacing-base) 0;
  padding: var(--spacing-sm);
  border: 1px solid var(--color-border);
  background: var(--color-bg-secondary);
  border-radius: var(--pre-border-radius);
  box-shadow: 0 1px 2px 0 var(--color-border);
}

.toc .toc-content a {
  text-decoration: none;
  color: var(--color-text-primary);
  font-size: var(--font-size-small);
}

.toc .toc-content ol li {
  list-style-type: disc !important;
}

.time {
  margin: var(--spacing-md) 0;
}

@media (max-width: 600px) {
  .path-nav li {
    max-width: 100px; /* More aggressive truncation on mobile */
  }

  .path-nav li:first-child {
    max-width: none; /* Don't truncate site title */
  }

  .path-nav li.current {
    max-width: 150px; /* Allow slightly more width for current page on mobile */
  }
}

@media (max-width: 600px) {
  body {
    padding-top: 2em;
  }

  pre {
    max-width: calc(100vw - 4em);
  }
}

/* Print styles */
@media print {
  body {
    background: white;
    color: black;
    padding: 0;
    display: block;
  }

  header,
  footer,
  .terminal-nav,
  .skip-link,
  .toc,
  .back-nav {
    display: none !important;
  }

  main {
    max-width: 100%;
  }

  a {
    border-bottom: none;
    color: black;
  }

  a[href]::after {
    content: " (" attr(href) ")";
    font-size: 0.8em;
    color: gray;
  }

  a[href^="#"]::after,
  a[href^="javascript:"]::after {
    content: "";
  }

  pre,
  blockquote,
  img {
    page-break-inside: avoid;
  }

  h1,
  h2,
  h3,
  h4,
  h5 {
    page-break-after: avoid;
  }
}

/* 强行抹除所有标题前的自动编号 */
h1::before, h2::before, h3::before, h4::before {
  content: none !important;
  counter-increment: none !important;
  display: none !important;
}

/* 消除可能存在的左侧缩进 */
h1, h2, h3, h4 {
  padding-left: 0 !important;
  margin-left: 0 !important;
}

.quiet-rating {
  display: inline-block;
  font-size: 0.75em;
  font-weight: 500;            /* 关键：从 300 调到 500，文字更有存在感 */
  letter-spacing: 0.12em;      /* 稍微收紧一点间距，让它看起来更扎实 */
  color: #8C4332;              /* 你的砖红色 */
  opacity: 0.9;               /* 提高不透明度，让颜色更饱满 */
  
  /* 边框微调 */
  border: 1px solid rgba(140, 67, 50, 0.4); /* 边框从 1px 增加到 1.5px */
  padding: 1px 8px;
  border-radius: 3px;          /* 稍微带一点点圆角，呼应 base.css 的精致感 */
  
  text-transform: uppercase;
  vertical-align: middle;
}

.warning-collapse summary {
  cursor: pointer;
  font-size: 0.8em;
  color: #5A4E49;
  opacity: 0.8;
  text-decoration: underline;
  list-style: none; /* 去掉默认的小三角 */
}

/* 强制统一笔记本内部的所有段落：首行缩进 2 字 */
.y鑫-notebook p {
  margin: 0 !important;
  padding: 0 !important;
  /* 关键：text-indent 设为 2em 刚好是两个字的宽度 */
  text-indent: 2em !important; 
  text-align: justify; /* 顺便让文字两端对齐，看起来更像印刷/认真书写的日记 */
}
/* 王栎鑫的笔记本专用样式 - 深度兼容版 */
.y鑫-notebook {
  --notebook-line-height: 2rem; /* 使用 rem 锁定高度，不受父级 em 干扰 */
  
  margin: var(--spacing-lg) auto;
  padding: 0 1.5rem 0 4rem; /* 上下 padding 设为 0，靠 line-height 撑起 */
  background-color: #fdfdfb;
  
  /* 精准对齐横线 */
  background-image: linear-gradient(var(--color-border) 1px, transparent 1px);
  background-size: 100% var(--notebook-line-height);
  background-position: 0 calc(var(--notebook-line-height) - 1px); /* 让线刚好在文字脚下 */
  
  border: 1px solid var(--color-border);
  border-radius: none;
  box-shadow: 5px 5px 20px rgba(0,0,0,0.07);
  
  /* 强制覆盖主题字体 */
  font-family: "Noto Serif SC", "STSong", "SimSun", serif !important;
  line-height: var(--notebook-line-height) !important; 
  font-size: 0.9rem; /* 稍微大一点点，更有手写感 */
  color: var(--color-text-primary);
  
  position: relative;
  word-wrap: break-word;
  overflow: hidden;
}

/* 模拟笔记本左侧的红色装订线 */
.y鑫-notebook::before {
  content: "";
  position: absolute;
  top: 0;
  left: 40px; /* 红线位置稍微往右挪一点点 */
  width: 1px;
  height: 100%;
  border-left: 1px solid rgba(140, 67, 50, 0.8); /* 稍微加粗一点点，更有质感 */
}

/* 这里的段落也需要重置，防止主题的 p 标签自带 margin 破坏对齐 */
.y鑫-notebook p {
  margin: 0 !important;
  padding: 0 !important;
}

/* Custom defined styles */
@import "assets/css/custom";
